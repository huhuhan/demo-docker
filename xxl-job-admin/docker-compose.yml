version: '3'

services:
  # 默认账户admin/123456
  xxl-job-admin:
    container_name: xxl-job-admin
    image: xuxueli/xxl-job-admin:2.3.0
    environment:
      # 参数覆盖
      PARAMS: "
      --server.servlet.context-path=/
      --spring.datasource.url=jdbc:mysql://192.168.2.201:3306/xxl_job?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true&serverTimezone=Asia/Shanghai
      --spring.datasource.username=root
      --spring.datasource.password=yanghan
      --spring.mail.host=smtp.qiye.aliyun.com
      --spring.mail.port=465
      --spring.mail.username=xx@aliyun.com
      --spring.mail.from=xx@aliyun.com
      --spring.mail.password=xxxx
      --spring.datasource.hikari.minimum-idle=10
      --spring.datasource.hikari.maximum-pool-size=30
      --spring.datasource.hikari.auto-commit=true
      --spring.datasource.hikari.idle-timeout=30000
      --spring.datasource.hikari.pool-name=HikariCP
      --spring.datasource.hikari.max-lifetime=900000
      --spring.datasource.hikari.connection-timeout=10000
      --spring.datasource.hikari.validation-timeout=1000
      ## 调度中心通讯TOKEN [选填]：非空时启用
      --xxl.job.accessToken=
      ## 调度中心国际化配置 [必填]： 默认为 zh_CN 中文简体, 可选范围为  zh_TC 中文繁体 and  en 英文；
      --xxl.job.i18n=zh_CN
      ## 调度线程池最大线程配置【必填】
      --xxl.job.triggerpool.fast.max=200
      --xxl.job.triggerpool.slow.max=100
      ## 调度中心日志表数据保存天数 [必填]：过期日志自动清理；限制大于等于7时生效，否则, 如-1，关闭自动清理功能；
      --xxl.job.logretentiondays=30
      "
    ports:
      - 8080:8080
    volumes:
      - 改为存放目录:/data/applogs